{##
 # This file is part of the SgDatatablesBundle package.
 #
 # (c) stwe <https://github.com/stwe/DatatablesBundle>
 #
 # For the full copyright and license information, please view the LICENSE
 # file that was distributed with this source code.
 #}
<script type="text/javascript">

    $(document).ready(function () {

        var locale = "{{ app.request.getLocale() }}";
        var language = {};
        language['de'] = "http://cdn.datatables.net/plug-ins/1.10.12/i18n/German.json";
        language['en'] = "http://cdn.datatables.net/plug-ins/1.10.12/i18n/English.json";
        language['fr'] = "http://cdn.datatables.net/plug-ins/1.10.12/i18n/French.json";

        var selector = "#{{ sg_datatable_view.name }}";
        var oTable;

        var defaults = {
            "language": {
                "url": language[locale]
            }
        };

        var ajax = {
            {% include 'SgDatatablesBundle:datatable:ajax.html.twig' %}
        };

        var columns = {
            {% include 'SgDatatablesBundle:datatable:columns.html.twig' %}
        };

        function createDatatable() {
            $.extend(defaults, ajax);
            $.extend(defaults, columns);
            if (!$.fn.DataTable.isDataTable(selector)) {
                oTable = $(selector)
                        .DataTable(defaults)
            }
        }

        setTimeout(createDatatable, 0 /* no waitFor rendering*/);
    });

</script>
