{##
 # This file is part of the SgDatatablesBundle package.
 #
 # (c) stwe <https://github.com/stwe/DatatablesBundle>
 #
 # For the full copyright and license information, please view the LICENSE
 # file that was distributed with this source code.
 #}

{# Buttons Extension #}
{% if sg_datatables_view.extensions.buttons is not same as(null) %}
    {# the easiest way to activate the extension - buttons is a boolean value (true) #}
    {% if sg_datatables_view.extensions.buttons is same as(true) %}
        buttons: true,
    {% endif %}
    {# buttons is given as an object - handle the 'showButtons' option #}
    {% if sg_datatables_view.extensions.buttons.showButtons is defined and sg_datatables_view.extensions.buttons.showButtons is not same as(null) %}
        buttons: {{ sg_datatables_view.extensions.buttons.showButtons|raw }},
    {% endif %}
    {# buttons is given as an object - render the created buttons #}
    {% if sg_datatables_view.extensions.buttons.createButtons is defined and sg_datatables_view.extensions.buttons.createButtons is not same as(null) %}
        buttons: [
            {% for button in sg_datatables_view.extensions.buttons.createButtons %}
                {% include 'SgDatatablesBundle:datatable:button.html.twig' %}
            {% endfor %}
        ],
    {% endif %}
{% endif %}

{# Responsive Extension #}
{% if sg_datatables_view.extensions.responsive is not same as(null) %}
    {% if sg_datatables_view.extensions.responsive is same as(true) %}
        {# the easiest way to activate the extension - responsive is a boolean value (true) #}
        responsive: true,
    {% elseif sg_datatables_view.extensions.responsive.details is defined and sg_datatables_view.extensions.responsive.details is not same as(null) %}
        {# responsive is given as an object to handle the 'details' options #}
        responsive: {
            {% if sg_datatables_view.extensions.responsive.details is not iterable %}
                {# details is a simple boolean value #}
                details: {{ sg_datatables_view.extensions.responsive.details|sg_datatables_bool_var }},
            {% else %}
                {# details is an array #}
                details: {
                    {% if sg_datatables_view.extensions.responsive.details.type is defined %}
                        type: "sg_datatables_view.extensions.responsive.details.type",
                    {% endif %}
                    {% if sg_datatables_view.extensions.responsive.details.target is defined %}
                        target: "sg_datatables_view.extensions.responsive.details.target",
                    {% endif %}
                    {% if sg_datatables_view.extensions.responsive.details.renderer is defined %}
                        {% if sg_datatables_view.extensions.responsive.details.renderer['vars'] is defined %}
                            {% set vars = sg_datatables_view.extensions.responsive.details.renderer['vars'] %}
                        {% else %}
                            {% set vars = {} %}
                        {% endif %}
                        renderer: {% include sg_datatables_view.extensions.responsive.details.renderer['template'] with vars %},
                    {% endif %}
                    {% if sg_datatables_view.extensions.responsive.details.display is defined %}
                        {% if sg_datatables_view.extensions.responsive.details.display['vars'] is defined %}
                            {% set vars = sg_datatables_view.extensions.responsive.details.display['vars'] %}
                        {% else %}
                            {% set vars = {} %}
                        {% endif %}
                        display: {% include sg_datatables_view.extensions.responsive.details.display['template'] with vars %},
                    {% endif %}
                },
            {% endif %}
        },
    {% endif %}
{% endif %}
